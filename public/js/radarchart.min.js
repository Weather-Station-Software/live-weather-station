function RadarChart(){var g=UUID.generate();var G=[];var o={filter:"rcGlow"+g,filter_id:"rcGlow"+g,resize:false,valFormat:"",valUnit:"",width:window.innerWidth,widthMax:window.innerWidth,height:window.innerHeight,heightMax:window.innerHeight,correctAdd:0,correctMul:1,minRadius:80,margins:{top:0,right:0,bottom:0,left:0},circles:{levels:6,maxValue:0,labelFactor:1.25,opacity:0.1,fill:"#CDCDCD",color:"#CDCDCD"},areas:{colors:{},opacity:0.35,borderWidth:2,rounded:false,dotRadius:4,sort:true,filter:[]},axes:{display:true,threshold:90,lineColor:"white",lineWidth:"2px",fontWidth:"11px",fontColor:"black",wrapWidth:60,filter:[],invert:[],ranges:{}},legend:{display:true,symbol:"diamond",toggle:"circle",position:{x:25,y:25}},classed:"lws",color:d3.scale.category10().range()};var i;var A;var y;var l;var p={update:{begin:null,end:null},gridCircle:{mouseover:null,mouseout:null,mouseclick:null},axisLabel:{mouseover:null,mouseout:null,mouseclick:null},line:{mouseover:null,mouseout:null,mouseclick:null},legend:{mouseover:k,mouseout:w,mouseclick:j},axisLegend:{mouseover:null,mouseout:null,mouseclick:null},radarArea:{mouseover:E,mouseout:w,mouseclick:null},radarInvisibleCircle:{mouseover:D,mouseout:a,mouseclick:null}};var s;var u;var H=[];var c=[];var C={};var b=d3.format(o.valFormat);var F=0;var t=0;var q;var n;var x;var d;function I(N){N.each(function(){M();h();d=d3.select(this);v();var O=d.append("svg").attr("overflow","visible").attr("width",o.width).attr("height",o.height);i=O.append("g").attr("class",o.classed+"RadarNode");A=O.append("g").attr("class",o.classed+"HoverNode");y=O.append("g").attr("class",o.classed+"TooltipNode");l=O.append("g").attr("class",o.classed+"Legend");var U=i.append("g").attr("class",o.classed+"AxisWrapper");var Q=i.append("defs").append("filter").attr("id",o.filter_id),T=Q.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur"),S=Q.append("feMerge"),R=S.append("feMergeNode").attr("in","coloredBlur"),P=S.append("feMergeNode").attr("in","SourceGraphic");u=y.append("foreignObject").attr("class",o.classed+"Tooltip").style("opacity",1).style("padding-top","10px").style("padding-left","20px").style("width","200px").style("height","200px");s=function(){var X=F;b=d3.format(o.valFormat);M();h();q=H.map(function(aj){return aj.key});n=d3.scale.ordinal().domain(H.map(function(aj){return aj._i})).range(H.map(function(aj){return aj.key}));ad=d3.scale.ordinal().domain(H.map(function(aj){return o.areas.colors[n(aj._i)]?n(aj._i):aj._i.toString()})).range(H.map(function(aj){return m(aj)}));O.transition().delay(t).duration(X).attr("width",o.width).attr("height",o.height);i.transition().delay(t).duration(X).attr("width",o.width).attr("height",o.height).attr("transform","translate("+((o.width-(o.margins.left+o.margins.right))/2+o.margins.left)+","+((o.height-(o.margins.top+o.margins.bottom))/2+o.margins.top)+")");A.transition().delay(t).duration(X).attr("width",o.width).attr("height",o.height).attr("transform","translate("+((o.width-(o.margins.left+o.margins.right))/2+o.margins.left)+","+((o.height-(o.margins.top+o.margins.bottom))/2+o.margins.top)+")");y.transition().delay(t).duration(X).attr("width",o.width).attr("height",o.height).attr("transform","translate("+((o.width-(o.margins.left+o.margins.right))/2+o.margins.left)+","+((o.height-(o.margins.top+o.margins.bottom))/2+o.margins.top)+")");l.attr("transform","translate("+o.legend.position.x+","+o.legend.position.y+")");var ae=U.selectAll("."+o.classed+"GridCircle").data(d3.range(1,(o.circles.levels+1)).reverse());ae.transition().duration(X).attr("r",function(ak,aj){return C.radius/o.circles.levels*ak}).style("fill",o.circles.fill).style("fill-opacity",o.circles.opacity).style("stroke",o.circles.color).style("filter",function(){if(o.filter){return"url(#"+o.filter+")"}});ae.enter().append("circle").attr("class",o.classed+"GridCircle").attr("r",function(ak,aj){return C.radius/o.circles.levels*ak}).on("mouseover",function(ak,aj){if(p.gridCircle.mouseover){p.gridCircle.mouseover(ak,aj)}}).on("mouseout",function(ak,aj){if(p.gridCircle.mouseout){p.gridCircle.mouseout(ak,aj)}}).style("fill",o.circles.fill).style("fill-opacity",o.circles.opacity).style("stroke",o.circles.color).style("filter",function(){if(o.filter){return"url(#"+o.filter+")"}});ae.exit().transition().duration(X*0.5).delay(function(ak,aj){return 0}).remove();var aa=U.selectAll("."+o.classed+"AxisLabel").data(d3.range(1,(o.circles.levels+1)).reverse());aa.transition().duration(X/2).style("opacity",1).transition().duration(X/2).text(function(ak,aj){if(C.maxValue){return b(o.correctAdd+(o.correctMul*C.maxValue*ak/o.circles.levels))+o.valUnit}}).attr("y",function(aj){return -aj*C.radius/o.circles.levels}).style("opacity",1);aa.enter().append("text").attr("class",o.classed+"AxisLabel").attr("x",4).attr("y",function(aj){return -aj*C.radius/o.circles.levels}).attr("dy","0.4em").style("font-size","10px").attr("fill","#737373").on("mouseover",function(ak,aj){if(p.axisLabel.mouseover){p.axisLabel.mouseover(ak,aj)}}).on("mouseout",function(ak,aj){if(p.axisLabel.mouseout){p.axisLabel.mouseout(ak,aj)}}).text(function(ak,aj){if(C.maxValue){return b(o.correctAdd+(o.correctMul*C.maxValue*ak/o.circles.levels))+o.valUnit}});aa.exit().transition().duration(X*0.5).remove();var ab=U.selectAll("."+o.classed+"Axis").data(C.axes,r);ab.enter().append("g").attr("class",o.classed+"Axis").attr("key",function(aj){return aj.axis});ab.exit().transition().duration(X).style("opacity",0).remove();var Y=ab.selectAll("."+o.classed+"Line").data(function(aj){return[aj]},r);Y.enter().append("line").attr("class",o.classed+"Line").attr("x1",0).attr("y1",0).attr("x2",function(al,ak,aj){return K(null,1.1,aj)}).attr("y2",function(al,ak,aj){return J(null,1.1,aj)}).on("mouseover",function(al,ak,aj){if(p.line.mouseover){p.line.mouseover(al,aj)}}).on("mouseout",function(al,ak,aj){if(p.line.mouseout){p.line.mouseout(al,aj)}}).style("stroke",o.axes.lineColor).style("stroke-width","2px");Y.exit().transition().duration(X*0.5).delay(function(ak,aj){return 0}).remove();Y.transition().duration(X).style("stroke",o.axes.lineColor).style("stroke-width",o.axes.lineWidth).attr("x2",function(al,ak,aj){return K(null,1.1,aj)}).attr("y2",function(al,ak,aj){return J(null,1.1,aj)});var V=ab.selectAll("."+o.classed+"AxisLegend").data(function(aj){return[aj]},r);V.enter().append("text").attr("class",o.classed+"AxisLegend").style("font-size",o.axes.fontWidth).attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(al,ak,aj){return K(null,o.circles.labelFactor,aj)}).attr("y",function(al,ak,aj){return J(null,o.circles.labelFactor,aj)}).style("opacity",function(ak,aj){return o.axes.display?1:0}).on("mouseover",function(al,ak,aj){if(p.axisLegend.mouseover){p.axisLegend.mouseover(al,ak,aj)}}).on("mouseout",function(al,ak,aj){if(p.axisLegend.mouseout){p.axisLegend.mouseout(al,ak,aj)}}).call(z,o.axes.wrapWidth);V.exit().transition().duration(X*0.5).delay(function(ak,aj){return 0}).remove();V.transition().duration(X).style("opacity",function(ak,aj){return o.axes.display&&C.radius>o.axes.threshold?1:0}).attr("x",function(al,ak,aj){return K(null,o.circles.labelFactor,aj)}).attr("y",function(al,ak,aj){return J(null,o.circles.labelFactor,aj)}).selectAll("tspan").attr("x",function(al,ak,aj){return K(null,o.circles.labelFactor,aj)}).attr("y",function(al,ak,aj){return J(null,o.circles.labelFactor,aj)});var Z=d3.svg.line.radial().interpolate(o.areas.rounded?"cardinal-closed":"linear-closed").radius(function(aj){return C.rScale(aj.value)}).angle(function(ak,aj){return aj*C.angleSlice});var ai=i.selectAll("."+o.classed+"RadarWrapper").data(H,L);ai.enter().append("g").attr("class",o.classed+"RadarWrapper").attr("key",function(aj){return aj.key});ai.exit().transition().duration(X).style("opacity",0).remove();ai.style("fill-opacity",function(ak,aj){return o.areas.filter.indexOf(ak.key)>=0?0:o.areas.opacity});var ah=ai.selectAll("."+o.classed+"RadarArea").data(function(aj){return[aj]},L);ah.enter().append("path").attr("class",function(aj){return o.classed+"RadarArea "+aj.key.replace(/\s+/g,"")}).attr("d",function(ak,aj){return Z(ak.values)}).style("fill",function(al,ak,aj){return m(al)}).style("fill-opacity",0).on("mouseover",function(ak,aj){if(p.radarArea.mouseover){p.radarArea.mouseover(ak,aj,this)}}).on("mouseout",function(ak,aj){if(p.radarArea.mouseout){p.radarArea.mouseout(ak,aj,this)}});ah.exit().remove();ah.transition().duration(X).style("fill",function(al,ak,aj){return m(al)}).attr("d",function(ak,aj){return Z(ak.values)}).style("fill-opacity",function(ak,aj){return o.areas.filter.indexOf(ak.key)>=0?0:o.areas.opacity});var ag=ai.selectAll("."+o.classed+"RadarStroke").data(function(aj){return[aj]},L);ag.enter().append("path").attr("class",o.classed+"RadarStroke").attr("d",function(ak,aj){return Z(ak.values)}).style("opacity",0).style("stroke-width",o.areas.borderWidth+"px").style("stroke",function(al,ak,aj){return m(al)}).style("fill","none").style("filter",function(){if(o.filter){return"url(#"+o.filter+")"}});ag.exit().remove();ag.transition().duration(X).style("stroke",function(al,ak,aj){return m(al)}).attr("d",function(ak,aj){return Z(ak.values)}).style("filter",function(){if(o.filter){return"url(#"+o.filter+")"}}).style("opacity",function(ak,aj){return o.areas.filter.indexOf(ak.key)>=0?0:1});update_radarCircle=ai.selectAll("."+o.classed+"RadarCircle").data(function(ak,aj){return e(ak._i,ak.key,ak.values)});update_radarCircle.enter().append("circle").attr("class",o.classed+"RadarCircle").attr("r",o.areas.dotRadius).attr("cx",function(al,ak,aj){return K(0,0,ak)}).attr("cy",function(al,ak,aj){return J(0,0,ak)}).style("fill",function(al,ak,aj){return m(al,al._i,H[aj].key)}).style("fill-opacity",function(ak,aj){return 0}).transition().duration(X).attr("cx",function(al,ak,aj){return K(al.value,0,ak)}).attr("cy",function(al,ak,aj){return J(al.value,0,ak)});update_radarCircle.exit().remove();update_radarCircle.transition().duration(X).style("fill",function(al,ak,aj){return m(al,al._i,H[aj].key)}).style("fill-opacity",function(am,al,aj){var ak=H.map(function(an){return an.key})[aj];return o.areas.filter.indexOf(ak)>=0?0:0.8}).attr("r",o.areas.dotRadius).attr("cx",function(ak,aj){return K(ak.value,0,aj)}).attr("cy",function(ak,aj){return J(ak.value,0,aj)});var W=A.selectAll("."+o.classed+"RadarCircleWrapper").data(H,L);W.enter().append("g").attr("class",o.classed+"RadarCircleWrapper").attr("key",function(aj){return aj.key});W.exit().transition().duration(X).style("opacity",0).remove();update_radarInvisibleCircle=W.selectAll("."+o.classed+"RadarInvisibleCircle").data(function(ak,aj){return e(ak._i,ak.key,ak.values)});update_radarInvisibleCircle.enter().append("circle").attr("class",o.classed+"RadarInvisibleCircle").attr("r",o.areas.dotRadius*1.5).attr("cx",function(ak,aj){return K(ak.value,0,aj)}).attr("cy",function(ak,aj){return J(ak.value,0,aj)}).style("fill","none").style("pointer-events","all").on("mouseover",function(ak,aj){if(p.radarInvisibleCircle.mouseover){p.radarInvisibleCircle.mouseover(ak,aj,this)}}).on("mouseout",function(ak,aj){if(p.radarInvisibleCircle.mouseout){p.radarInvisibleCircle.mouseout(ak,aj,this)}});update_radarInvisibleCircle.exit().remove();update_radarInvisibleCircle.attr("cx",function(ak,aj){return K(ak.value,0,aj)}).attr("cy",function(ak,aj){return J(ak.value,0,aj)});if(o.legend.display){var af=d3.svg.symbol().type(o.legend.symbol).size(150)();var ad=d3.scale.ordinal().domain(H.map(function(aj){return aj._i})).range(H.map(function(aj){return m(aj)}));if(d3.legend){var ac=d3.legend.color().shape("path",af).shapePadding(10).scale(ad).labels(ad.domain().map(function(aj){return n(aj)})).on("cellclick",function(ak,aj){if(p.legend.mouseclick){p.legend.mouseclick(ak,aj,this)}}).on("cellover",function(ak,aj){if(p.legend.mouseover){p.legend.mouseover(ak,aj,this)}}).on("cellout",function(ak,aj){if(p.legend.mouseout){p.legend.mouseout(ak,aj,this)}});l.call(ac);l.selectAll(".cell").attr("gen",function(al,ak){if(c[al]==true){var aj=d3.svg.symbol().type(o.legend.toggle).size(150)()}else{var aj=d3.svg.symbol().type(o.legend.symbol).size(150)()}d3.select(this).select("path").attr("d",function(){return aj});return c[al]})}}}})}function M(){H=JSON.parse(JSON.stringify(G));var R=f(H);var N={};H.forEach(function(T){T.values.forEach(function(Y,X){var V=N[R[X]]?N[R[X]]:o.axes.ranges[R[X]]?o.axes.ranges[R[X]].slice():[0,1];var U=Y.value>V[1]?Y.value:V[1];var W=Y.value<V[0]?Y.value:V[0];N[R[X]]=[W,U]})});H.forEach(function(T){T.values.forEach(function(W,V){if(N[R[V]][0]!==0&&N[R[V]][1]!==1){var U=N[R[V]];W.original_value=Number(W.value);W.value=(W.value-U[0])/(U[1]-U[0])}if(o.axes.invert.indexOf(R[V])>=0){W.value=1-W.value}})});H.forEach(function(T){T._avg=d3.mean(T.values,function(U){return U.value})});H=o.areas.sort?H.sort(function(U,T){var U=U._avg;var T=T._avg;return T-U}):H;var P=R.map(function(T,U){return(o.axes.filter.indexOf(R[U])>=0)?U:undefined}).reverse();H.forEach(function(T){P.forEach(function(U){if(U>=0){T.values.splice(U,1)}})});var Q=(function(U,T){while(U--){T[U]=U}return T})(10,[]);var S=H.map(function(T){return T._i});var O=Q.filter(function(T){return S.indexOf(T)<0}).reverse();H=H.map(function(U,T){if(U._i>=0){return U}else{U._i=O.length?O.pop():T;return U}})}function f(N){return N.length?N[0].values.map(function(P,O){return P.axis}):[]}function h(){var O=H.length?H[0].values.map(function(Q,P){return Q}):[];var N=f(H);C={radius:Math.min((o.width-(o.margins.left+o.margins.right))/2,(o.height-(o.margins.bottom+o.margins.top))/2),axes:O,axisLabels:N,maxValue:Math.max(o.circles.maxValue,d3.max(H,function(P){return d3.max(P.values.map(function(Q){return Q.value}))}))};C.radius=Math.max(C.radius,o.minRadius);C.total=C.axes.length;C.angleSlice=C.total>0?Math.PI*2/C.total:1;C.rScale=d3.scale.linear().range([0,C.radius]).domain([0,C.maxValue])}function B(S,P,R){if(P.constructor===Array){P.forEach(function(U){O(U)})}else{if(typeof P!="object"){O(P)}else{return I}}function O(U){if(!isNaN(U)&&(function(V){return(V|0)===V})(parseFloat(U))){Q(parseInt(U))}else{if(typeof U=="string"){Q(U)}}}function Q(U){if(R.indexOf(U)>=0){T(U)}else{if(U>=0&&U<R.length){T(R[U])}}}function T(U){if(S.indexOf(U)>=0){N(S,U)}else{S.push(U)}}function N(U,W){for(var V=U.length;V--;){if(U[V]===W){U.splice(V,1)}}}}function K(O,P,N){return C.rScale(O?O:C.maxValue*P)*Math.cos(C.angleSlice*N-Math.PI/2)}function J(O,P,N){return C.rScale(O?O:C.maxValue*P)*Math.sin(C.angleSlice*N-Math.PI/2)}function m(P,N,O){N=N?N:P._i;O=O?O:P.key;return o.areas.colors[O]?o.areas.colors[O]:o.color[N]}I.nodes=function(){return{svg:svg,chart:i,hover:A,tooltip:y,legend:l}};I.events=function(P){if(!arguments.length){return p}var Q=Object.keys(P);var O=Object.keys(p);for(var N=0;N<Q.length;N++){if(O.indexOf(Q[N])>=0){p[Q[N]]=P[Q[N]]}}return I};I.width=function(N){if(!arguments.length){return o.width}if(o.resize){o.widthMax=N}else{o.width=N}v();return I};I.height=function(N){if(!arguments.length){return o.height}if(o.resize){o.heightMax=N}else{o.height=N}v();return I};I.duration=function(N){if(!arguments.length){return F}F=N;return I};I.update=function(){if(p.update.begin){p.update.begin(H)}if(typeof s==="function"){s()}setTimeout(function(){if(p.update.end){p.update.end(H)}},F)};I.data=function(O){if(!arguments.length){return G}if(c.length){var N=H.map(function(P){return P.key});c.forEach(function(Q,P){I.filterAreas(N[P])})}c=[];G=O;return I};I.pop=function(){var N=G.pop();if(typeof s==="function"){s()}return N};I.push=function(P){if(P&&P.constructor===Array){for(var O=0;O<P.length;O++){N(P[O])}}else{N(P)}function N(Q){if(Q.key&&G.map(function(R){return R.key}).indexOf(Q.key)<0){G.push(Q)}}return I};I.shift=function(){var N=G.shift();if(typeof s==="function"){s()}return N};I.unshift=function(P){if(P&&P.constructor===Array){for(var O=0;O<P.length;O++){N(P[O])}}else{N(P)}function N(Q){if(Q.key&&G.map(function(R){return R.key}).indexOf(Q.key)<0){G.unshift(Q)}}return I};I.slice=function(O,N){return G.slice(O,N)};I.options=function(R){if(!arguments.length){return o}var S=Object.keys(R);var T=Object.keys(o);for(var Q=0;Q<S.length;Q++){if(T.indexOf(S[Q])>=0){if(typeof(o[S[Q]])=="object"){var N=Object.keys(R[S[Q]]);var P=Object.keys(o[S[Q]]);for(var O=0;O<N.length;O++){if(P.indexOf(N[O])>=0){o[S[Q]][N[O]]=R[S[Q]][N[O]]}}}else{o[S[Q]]=R[S[Q]]}}}return I};I.margins=function(P){if(!arguments.length){return o.margins}var O=Object.keys(values);var Q=Object.keys(o.margins);for(var N=0;N<O.length;N++){if(Q.indexOf(O[N])>=0){o.margins[O[N]]=values[O[N]]}}return I};I.levels=function(N){if(!arguments.length){return o.circles.levels}o.circles.levels=N;return I};I.maxValue=function(N){if(!arguments.length){return o.circles.maxValue}o.circles.maxValue=N;return I};I.opacity=function(N){if(!arguments.length){return o.areas.opacity}o.areas.opacity=N;return I};I.borderWidth=function(N){if(!arguments.length){return o.areas.borderWidth}o.areas.borderWidth=N;return I};I.rounded=function(N){if(!arguments.length){return o.areas.rounded}o.areas.rounded=N;return I};I.color=function(N){if(!arguments.length){return o.color}o.color=N;return I};I.colors=function(N){if(!arguments.length){return o.areas.colors}o.areas.colors=N;return I};I.keys=function(){return G.map(function(N){return N.key})};I.axes=function(){return f(G)};I.filterAxes=function(N){if(!arguments.length){return o.axes.filter}var O=f(G);B(o.axes.filter,N,O);return I};I.filterAreas=function(N){if(!arguments.length){return o.areas.filter}var O=G.map(function(P){return P.key});B(o.areas.filter,N,O);return I};I.invert=function(N){if(!arguments.length){return o.axes.invert}var O=f(G);B(o.axes.invert,N,O);return I};I.ranges=function(O){if(!arguments.length){return o.axes.ranges}if(typeof O=="string"){return I}var Q=f(G);if(O&&O.constructor===Array){O.forEach(function(R){N(R)})}else{N(O)}function N(T){var S=Object.keys(T);for(var R=0;R<S.length;R++){if(Q.indexOf(S[R])>=0&&T[S[R]]&&T[S[R]].constructor===Array&&P(S[R],T[S[R]])){o.axes.ranges[S[R]]=T[S[R]]}}}function P(S,R){if(R.length==2&&!isNaN(R[0])&&!isNaN(R[1])){return true}else{if(R.length==0){delete o.axes.ranges[S]}}return false}return I};function E(P,O,N){if(c[P._i]){return}i.selectAll("."+o.classed+"RadarArea").transition().duration(200).style("fill-opacity",function(S,R,Q){return o.areas.filter.indexOf(S.key)>=0?0:0.1});d3.select(N).transition().duration(200).style("fill-opacity",function(S,R,Q){return o.areas.filter.indexOf(S.key)>=0?0:0.7});D(P,O,N)}function w(P,O,N){i.selectAll("."+o.classed+"RadarArea").transition().duration(200).style("fill-opacity",function(S,R,Q){return o.areas.filter.indexOf(S.key)>=0?0:o.areas.opacity});a(P,O,N)}function k(Q,O,N){if(c[Q]){return}var P=q.indexOf(Q)>=0?Q:n(Q);i.selectAll("."+o.classed+"RadarArea").transition().duration(200).style("fill-opacity",function(T,S,R){return o.areas.filter.indexOf(T.key)>=0?0:0.1});i.selectAll("."+o.classed+"RadarArea."+P.replace(/\s+/g,"")).transition().duration(200).style("fill-opacity",function(T,S,R){return o.areas.filter.indexOf(T.key)>=0?0:0.7})}function j(Q,O,N){var P=H.map(function(R){return R.key});B(o.areas.filter,P[Q],P);c[Q]=c[Q]?false:true;s()}function D(Q,O,N){if(c[Q._i]){return}if(o.width>200){var R=f(H);i.select('[key="'+Q.axis+'"]').select("foreignObject").style("opacity",1);newX=-((o.width-250)/10)-40-(o.width/2);newY=((o.height-250)/20)-(o.height/10)-(o.height/2);var P=Q.key.replace(/ - /gi,"<br/>");u.attr("x",newX).attr("y",newY).html('<body xmlns="http://www.w3.org/1999/xhtml"><div style="float:left;text-align:left;width:200px;height:200px;">'+P+"</div></body> ").transition().duration(200).style("opacity",1)}}function a(P,O,N){i.select('[key="'+P.axis+'"]').select("foreignObject").style("opacity",o.axes.display&&C.radius>o.axes.threshold?1:0);u.transition().duration(200).style("opacity",0)}function e(P,Q,O){for(var N=0;N<O.length;N++){O[N]["_i"]=P;O[N]["key"]=Q}return O}var L=function(N){return N&&N.key};var r=function(N){return N&&N.axis};function z(O,N){O.each(function(T,S,R){var Z=d3.select(this);var U=T.axis.split(/\s+/).reverse();var P;var ab=[];var Q=0;var Y=1.4;var X=K(null,o.circles.labelFactor,R);var W=J(null,o.circles.labelFactor,R);var aa=parseFloat(Z.attr("dy"));var V=Z.text(null).append("tspan").attr("dy",aa+"em");while(P=U.pop()){ab.push(P);V.text(ab.join(" "));if(V.node().getComputedTextLength()>N){ab.pop();V.text(ab.join(" "));ab=[P];V=Z.append("tspan").attr("dy",++Q*Y+aa+"em").text(P)}}})}window.addEventListener("resize",v,false);function v(){if(!o.resize||!d){return}var O=d.node().getBoundingClientRect().left;var Q=d.node().getBoundingClientRect().top;var P=Math.min(o.widthMax,document.documentElement.clientWidth-O);var N=Math.min(o.heightMax,document.documentElement.clientHeight-Q);o.height=N;o.width=P;I.update()}return I}var UUID=(function(){var a={};var c=[];for(var b=0;b<256;b++){c[b]=(b<16?"0":"")+(b).toString(16)}a.generate=function(){var g=Math.random()*4294967295|0;var f=Math.random()*4294967295|0;var e=Math.random()*4294967295|0;var d=Math.random()*4294967295|0;return c[g&255]+c[g>>8&255]+c[g>>16&255]+c[g>>24&255]+"-"+c[f&255]+c[f>>8&255]+"-"+c[f>>16&15|64]+c[f>>24&255]+"-"+c[e&63|128]+c[e>>8&255]+"-"+c[e>>16&255]+c[e>>24&255]+c[d&255]+c[d>>8&255]+c[d>>16&255]+c[d>>24&255]};return a})();